# 性能优化

**父组件重渲染，子组件一定会重渲染**

-   即使子组件不接受 _props_
-   官方提供 _memo_ api 帮助组件在接受的 _props_ 不改变的情况下跳过渲染

**上下文提供者（context）值改变，所有消费组件都将重渲染**

-   消费组件指真正用 _useContext_ 获取上下文的组件
-   常见于 _value_ 为对象的情况
-   在生成提供值（_value_）时用 _useMemo_ 包裹返回
-   只是微小优化，确保提供者组件重渲染不会生成不同 _value_ 导致消费组件重渲染

## 一.子组件使用

### 不推荐

-   _props_ 中对象用 _useMemo_ 包裹返回
-   _props_ 中函数用 _useCallback_ 包裹返回
-   子组件定义时使用 _memo_ api

### 推荐

-   在父组件中使用 _useMemo_ 包裹需要使用的子组件返回一个变量，在 return jsx 中使用
